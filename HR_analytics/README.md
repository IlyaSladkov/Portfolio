## Описание проекта

HR-аналитики компании «Работа с заботой» помогают бизнесу оптимизировать управление персоналом: бизнес предоставляет данные, а аналитики предлагают, как избежать финансовых потерь и оттока сотрудников. В этом HR-аналитикам пригодится машинное обучение, с помощью которого получится быстрее и точнее отвечать на вопросы бизнеса.

Компания предоставила данные с характеристиками сотрудников компании. Среди них — уровень удовлетворённости сотрудника работой в компании. Эту информацию получили из форм обратной связи: сотрудники заполняют тест-опросник, и по его результатам рассчитывается доля их удовлетворённости от 0 до 1, где 0 — совершенно неудовлетворён, 1 — полностью удовлетворён.

Собирать данные такими опросниками не так легко: компания большая, и всех сотрудников надо сначала оповестить об опросе, а затем проследить, что все его прошли.

Почему бизнесу это важно: удовлетворённость работой напрямую влияет на отток сотрудников. А предсказание оттока — одна из важнейших задач HR-аналитиков. Внезапные увольнения несут в себе риски для компании, особенно если уходит важный сотрудник.

## Цель работы

У вас будет несколько задач. Первая — построить модель, которая сможет предсказать уровень удовлетворённости сотрудника на основе данных заказчика.

Наша вторая задача — построить модель, которая сможет на основе данных заказчика предсказать то, что сотрудник уволится из компании.

## Общий вывод

В ходе работы разработаны 2 модель, которые предсказывают уровень удовлетворённости сотрудника и увольнение сотрудника из компании

Данные были получены из следующих файлов /datasets/train_job_satisfaction_rate.csv, /datasets/test_features.csv, /datasets/test_target_job_satisfaction_rate.csv, /datasets/train_quit.csv, /datasets/test_features.csv, /datasets/test_target_quit.csv. Перед началом исследовательской части был произведен обзор и проверка на адекватность полученных данных. Выявлено, что:

- в train_job_satisfaction и test_features присутствуют немногочисленные пропуски в данных в стобцах dept, level
- все данные пяти датасетов соответствуют описанию данных

Перед началом исследования была проведена предобработка данных,в рамках которой выялено:

- так как пропуски не многочисленные в таблицах, а данных для анализа мало, пропуски были заменены на самые популярные категории
- дубликатов в полученных данных не обнаружено

В ходе исследования данных выявлены следующие особенности:

- визуальный анализ показал, что у большинства признаков наблюдается распределение Пуассона, рекомендуется при корреляционном анализе использовать метод Спирмена
- видно ряд выбросов в столбце salary, это можно объяснить тем, что высокие заработные платы в компании из-за иерархической структуры у малого процентного числа работников
- наблюдается ярковыраженный дисбаланс класса в столбцах last_year_promo, last_year_violations
- признаки тестовой выборки имеют схожий характер с тренировочными
- корреляционный анализ показал, что целевой признак имеет высокую зависимость от supervisir_evalution
- в целевом признаке наблюдается дисбаланс классов, стоит это учитывать при обучении модели
- признаки тестовой выборки имеют схожий характер с тренировочными
- в целевом признаке наблюдается дисбаланс классов, стоит это учитывать при обучении модели
- корреляционный анализ показал, что целевой признак имеет значительную связь больше сего зависит employment_years (коэф. корр.= 0,66), от slary (коэф. корр.= 0,52), от level (коэф. корр.= 0,34)

Анализ уволившегося сотрудника показал:

- чаще всего увольняются из отдела продаж (29% от общего числа уволившихся)
- уволившеяся в 100% слачаев не имели повышения за последний год
- у уволившихся сотруднков чаще всего нет нарушений трудового договора за последний год (73% от общего числа уволившихся)
- чаще сего увольняются junior'ы (82% от общего числа уволившихся)
- чаще всего увольняются слабо- и средненагруженныесотрудники (44% и 39% соответственно от общего числа уволившихся)
- средняя зарплата уволившегося сотрудника 25767.93893129771
- средняя зарплата неуволившегося сотрудника 40952.17391304348
- распределение уровня удовлетвореннсти сотрудника показывает, что у ушедших сотрудников это показатель ниже (в среднем 0,4), чем у оставшихся (в среднем 0,56)

Перед началом обучения проведена подоготвка данных:

- подготовка признаков выполнена в пайплайне
- для признаков проведено масштабирование и кодирование
- при кодировании использовался OneHotEncoder для критериальных признаков и OrdinalEncoder для ранжированных признаков

На этапе обучения модели были выполнены следующие процедуры:

- создана своя метрика SMAPE, критерий успехадя которой SMAPE ≤15 на тестовой выборке
- для разработки модели предсказание уровня удовлетворённости сотрудника использовались модели DecisionTreeClassifier, LinearRegression, LinearSVR, DecisionTreeClassifier, KNeighborsClassifier, LogisticRegression и SVC для автоматизации подбора гиперпараметров используем OptunaSearchCV

Гиперпараметры модели с наилучшей метрикой для первой модели выглядят так:

- DecisionTreeRegressor(max_depth=380, max_features=285, max_leaf_nodes=224, random_state=42)
- StandardScaler()
- OneHotEncoder(drop='first',handle_unknown='ignore', sparse=False)
- OrdinalEncoder(categories=[['junior', 'middle', 'sinior'],['low', 'medium', 'high']],handle_unknown='use_encoded_value',unknown_value=np.nan))
- SimpleImputer(strategy='most_frequent')


Гиперпараметры модели с наилучшей метрикой для второй модели выглядят так:

- RandomForestClassifier(max_depth=4, max_features=8,min_samples_leaf=12, n_estimators=200, random_state=42)
- MinMaxScaler()
- SMOTE(k_neighbors=12, random_state=42)
- OneHotEncoder(drop='first',handle_unknown='ignore', sparse=False)
- OrdinalEncoder(categories=[['junior', 'middle', 'sinior'],['low', 'medium', 'high']],handle_unknown='use_encoded_value',unknown_value=np.nan))
- SimpleImputer(strategy='most_frequent')

Анализ метрик показал:
- метрика SMAPE на тестовой выборке первой модели оказалась <15, следовательно точность прогнозирования модели можно считать достаточной
- метрика ROC-AUC на тестовой выборке второй модели оказалась 0.921, следовательно точность прогнозирования модели можно считать достаточной

- Рекомендуется проводить анализ по полученным моделям для сотрудников не реже 1 раза в квартал, при получении сигнала прогнозирующего уход сотрудника, провести мероприятия по устраненинию такого желания (повышения или увеличения зароботной вилки)
